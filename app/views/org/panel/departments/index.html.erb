<div class="ui top attached segment">
  <%= render 'search_form' %>
</div>

<table class="ui bottom attached table">
  <thead>
    <tr>
      <th><%= Department.human_attribute_name(:name) %></th>
      <th>
        <%= Department.human_attribute_name(:needed_number) %>
        <span class="grey text">/</span>
        <%= Department.human_attribute_name(:members_count) %>
      </th>
      <th><%= Department.human_attribute_name(:office_id) %></th>
      <th><%= Department.human_attribute_name(:leader) %></th>
      <th>
        <%= link_to new_panel_department_path, remote: true, class: 'ui mini primary button' do %>
          <i class="fas fa-plus"></i><%= t('.new') %>
        <% end %>
        <%= link_to find_data_list_table_lists_path('DepartmentExport', request.query_parameters), class: 'ui mini secondary button', remote: true do %>
          <i class="fas fa-file-excel"></i><%= t('.export') %>
        <% end %>
      </th>
    </tr>
  </thead>

  <tbody>
  <% @departments.each do |department| %>
    <%= render partial: 'department', locals: { node: department } %>
    <%= draw_tree(department, partial: 'org/panel/departments/department') %>
  <% end %>
  </tbody>
</table>

<%= paginate @departments %>
