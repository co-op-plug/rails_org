<% content_for :nav do %>
  <%= render 'nav_show' %>
<% end %>

<%= content_for :breadcrumb do %>
  <div class="ui basic segment breadcrumb">
    <% @department.ancestors.reverse.each do |ancestor| %>
      <% if controller_path == 'org/panel/departments' %>
        <%= link_to ancestor.name, { id: ancestor.id }, { class: 'section' } %>
      <% else %>
        <%= link_to ancestor.name, { department_id: ancestor.id }, { class: 'section' } %>
      <% end %>
      <div class="divider">></div>
    <% end %>
    <div class="section"><%= @department.name %></div>
  </div>
<% end %>

<%= render 'department_navbar' %>

<div class="ui attached segment">
  <%= render 'search_form' %>
</div>

<table class="ui bottom attached table">
  <thead>
    <tr>
      <th><%= Member.human_attribute_name(:id) %></th>
      <th><%= Member.human_attribute_name(:name) %></th>
      <th><%= Member.human_attribute_name(:job_titles) %></th>
      <th><%= Member.human_attribute_name(:office) %></th>
      <th><%= Member.human_attribute_name(:leader) %></th>
      <th><%= Member.human_attribute_name(:join_on) %></th>
      <th>
        <%= link_to new_panel_member_path, class: 'ui mini primary button' do %>
          <i class="plus icon"></i><%= t('.new') %>
        <% end %>
      </th>
    </tr>
  </thead>

  <tbody>
  <% @members.each do |member| %>
    <%= render partial: 'member', locals: { member: member } %>
  <% end %>
  </tbody>
</table>

<%= paginate @members %>
